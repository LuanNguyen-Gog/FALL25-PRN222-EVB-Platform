services:
  evb_project.api:
    container_name: evb_project.api
    build:
      context: .
      dockerfile: EVB_Project.API/Dockerfile
    ports:
      - "8080:8080"
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      ConnectionStrings__DefaultConnection: >
        Host=dpg-d45ednumcj7s738us1a0-a.singapore-postgres.render.com;
        Port=5432;
        Database=evb_postgres_t8pe;
        Username=evb_postgres_t8pe_user;
        Password=d7uOzJH0DXciRNUgKBLNcFcdCjuivflw;
        SSL Mode=Require;
        Trust Server Certificate=true;
        Pooling=true;
        Maximum Pool Size=20;
        Timeout=15;
        Command Timeout=30;
        KeepAlive=30

    # --- Supabase (Storage) ---
      SUPABASE_URL: https://jiysbiujvatpvxxaivdt.supabase.co
      SUPABASE_BUCKET: evb
      SUPABASE_SERVICE_KEY: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImppeXNiaXVqdmF0cHZ4eGFpdmR0Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjQ5MDQzNiwiZXhwIjoyMDc4MDY2NDM2fQ.f-IEtY_VjtmslGgVc0D0jjhRFY7-W3dvMGIoahmn2qo

      # (tuỳ chọn) folder chuẩn hoá cho avatar:
      SUPABASE_AVATAR_PREFIX_USERS: avatars/users
      SUPABASE_AVATAR_PREFIX_VEHICLES: avatars/vehicles
      SUPABASE_AVATAR_PREFIX_BATTERIES: avatars/batteries

    networks:
      - appnet

networks:
  appnet:

volumes:
  evb_db_data: